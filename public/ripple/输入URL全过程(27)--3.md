# 从输入一个 URL 地址到浏览器完成渲染的整个过程

流程:2

## 1. 地址栏输入url并按下回车

## 2. 浏览器查找url是否存在**缓存**，且缓存是否过期

浏览器缓存策略

- **DNS缓存**：浏览器对dns解析域名后的ip地址进行本地缓存，无则本地DNS服务器递归查询，仍无则DNS根服务器迭代查询。

- **memory cache（本地缓存）**：不受控制，保证两相同请求不请求两次。

- **http 缓存**：（可控制）
  
  - 强缓存
    
    服务器接受请求返回响应头，要求客户端缓存：
    
    expires --http1.0，cache-control --http 1.1,包括了缓存时间
  
  - 协商缓存
    
    当缓存过期无效时，客户端不会直接删除缓存，向服务端询问缓存是否仍能使用？
    
    失效：服务器返回正常响应（200）
    
    有效：服务器返回304（未更改），返回新的缓存指令。

## 3. DNS解析url对应ip地址

DNS解析

- 本地查询--递归查询
  
  `:chrome://dns/` 查看chrome在本地的dns缓存（dns多重缓存）

- 远程查询--迭代查询（[www.google.com）](http://www.google.com%EF%BC%89)
  
  .（根域名服务器）-> .com -> google.com -> [www.google.com](http://www.google.com)

> DNS负载均衡：多个服务器支持访问一个域名，支持大量访问

## 4. 根据ip地址进行tcp连接（三次握手）

![1](https://gitee.com/rippleber/picgo/raw/master/img/202302220015599.png)

增加可靠性

## 5. 服务器处理请求，返回浏览器http响应（http缓存）

状态码：

- 1xx：指示信息–表示请求已接收，继续处理。

- 2xx：成功–表示请求已被成功接收、理解、接受。
  
  + 201（无内容）：成功处理了请求，但没有返回。

- 3xx：重定向–要完成请求必须进行更进一步的操作。
  
  + 301（永久移动）：网页已永久移动到新位置，服务区自动转到新位置。
  
  + 304（未更改）:请求的网页未修改，不返回内容

- 4xx：客户端错误–请求有语法错误或请求无法实现。
  
  + 401（请求要求身份验证）
  
  + 403（服务区拒绝访问）--权限不够
  
  + 404

- 5xx：服务器端错误–服务器未能实现合法的请求。
  
  常见状态码

方法：

- GET在浏览器回退时是无害的，而POST会再次提交请求。

- GET产生的URL地址可以被Bookmark，而POST不可以。

- GET请求会被浏览器主动cache，而POST不会，除非手动设置。

- GET请求只能进行url编码，而POST支持多种编码方式。

- GET请求参数会被完整保留在浏览器历史记录里，而POST中的参数不会被保留。

- GET请求在URL中传送的参数是有长度限制的，而POST么有。

- 对参数的数据类型，GET只接受ASCII字符，而POST没有限制。

- GET比POST更不安全，因为参数直接暴露在URL上，所以不能用来传递敏感信息。

- GET参数通过URL传递，POST放在Request body中。

- **GET会产生一个TCP数据包，而POST会产生两个TCP数据包。**

## 6. 浏览器解析响应，渲染页面

浏览器渲染流程

[什么是回流](css/%E4%BB%80%E4%B9%88%E6%98%AF%E5%9B%9E%E6%B5%81.md)

## 7. 关闭tcp连接（四次挥手）

![](https://gitee.com/rippleber/picgo/raw/master/img/202302220026901.png)

## review：

- [x] 2023-2-23
- [x] 2023-2-25
- [x] 2023-2-28
